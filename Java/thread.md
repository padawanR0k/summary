### 용어정리

- 프로세스
    - 운영체제 상에서 실행중인 하나의 애플리케이션
    - 하나의 애플리케이션이 멀티 프로세스를 만들기도한다.
- 스레드
    - 운영체제상에서 멀티태스킹을 할 수 있도록 하기위해 리소스들을 프로세스마다 할당하여 병렬로 실행시킨다.

        → 여러 프로그램을 키는것

    - 한 프로세스내에서 멀티 태스킹을  할수있도록 할 수 있게끔 도와주는것이 멀티쓰레드이다.

        → 카톡에서 채팅과 사진보내는것을 동시에 하는것

- 임계영역
    - 멀티  스레드 프로그램에서 단 하나의 스레드만 실행할 수 있는 코드영역

## 스레드

---

하나의 스레드는 하나의 코드실행 흐름이다. 멀티프로세스는 각각 독립적이지만, 스레드의 경우는 하나의 프로세스내부에 있는 스레드에 영향을 끼친다.

→ 예외처리를 빡세게해야한다.

### 메인 스레드

---

자바는 메인 스레드가 main함수를 실행하면서 실행된다. 그러므로 메인 스레드가 반드시 존재하게된다. 추가적인 병렬 작업을 원하면 하위 스레드를 생성하면된다.

```java
import java.util.Thread;

public static void main(String[] args) {
	Thread thread = new Thread(new Runnable() {
		public void run() {
			...
		}
	})
	thread.start()
}
```

- 코드에 대한 설명
    1. java에서는 스레드를 구현한 클래스를 기본으로 제공함. import
    2. Thread는 인자로 Runnable 타입을 받는다.
    3. 직접 파일로 실행시킬 Runnable을 implements한 클래스를  생성하거나 저렇게 익명객체로 바로 인자전달을 해도된다.
    4. start 실행시 해당 쓰레드가 실행된다.

### 스레드 이름

---

각 스레드에 대한 이름 설정과 조회

```java
Thread mainThread = Thread.currnetThread();

public class ThreadA extends Thread {
	public ThreadA() {
		setName("ThreadA") // 해당 쓰레드 명칭 설정
		getName() // 해당 쓰레드 명칭 조회
	}
}

```

## 동기화 메소드

---

- 여러 스레드를 운용하다보면 원치 않은 결과가 나올 수 도있다. 한 객체를 공유하여 사용하게 되면 실행되는 스레드의 순서에 따라 값이 달라 질수 도 있기때문임
- 이를 위해서, 특정스레드가 사용중인 객체를 다른 스레드에서 사용할 수 없게 객체에 잠금을 거는 방법도 있다.
- 자바는 임계영역을 지정하기 위해 동기화 메소드를 제공한다.
    - 메소드의 접근제한자 뒤에 `synchronized` 키워드를 붙이면 된다.

        ```java
        public synchronized void method1() {
        	임계영역
        }
        ```

    - 이 메소드가 실행중이라면 다른 스레드는 해당 메소드를 사용할 수 없으며, 다른 `synchronized` 메소드도 실행할 수 없다.

## 스레드 제어

---

- 쓰레드의 상태종류
    - 대기
    - 실행
    - 종료
- `Thread.start()` 메소드 실행시 바로 실행이 되는게아니라  `대기상태` 이후 CPU가 메소드를 실행하게함
- 실행상태에서 일시정지되는 경우에는 다시 `대기 → 실행` 플로우를 거쳐야함

### 스레드 상태제어

---

쓰레드의 상태를 변경하기 위한 메서드

- `interrupt()`
    - `InterruptException`  을 발생시켜, 예외처리 코드에서 실행대기 상태로 가거나, 종료 상태로 갈 수 있도록한다.
- `sleep()`
    - 주어진 시간동안 쓰레드를 일시정지상태로 만든다. 주어진 시간이 지나면 실행대기 상태가 됨 (다시 실행상태로 해줘야함)

쓰레드의 상태를 확인하기 위한 메서드

- `isInterrupted()`
    - 해당 스레드가 interrupted 되었는지 확인 (bool)

### 데몬 스레드

---

주  스레드의 작업을 돕는 스레드이다. 주 스레드가 종료될 떄 같이 강제 종료되는 스레드이다. 이 점을 제외하면 일반 스레드와 다른 점은 없다.

스레드를 데몬으로 만들기 위해서는 주 스레드가 데몬이 될 스레드의 setDaemon을 호출해주면된다.

```java
Thread thread1 = new Thread();
thread1.setDaemon(true);
thread1.start();
```